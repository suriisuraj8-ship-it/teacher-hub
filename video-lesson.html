<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Course Video</title>
<style>
  body { margin:0; font-family:'Poppins',sans-serif; background:#000; color:#fff; display:flex; flex-direction:column; align-items:center; }
  header { width:100%; padding:12px 20px; background:#111; display:flex; justify-content:space-between; align-items:center; }
  #userNameArea { color:#ffd47a; font-weight:700; }
  #signOutBtn { background:#ff4444; border:none; padding:8px 16px; color:#fff; cursor:pointer; border-radius:8px; }
  .container { width:100%; max-width:800px; padding:20px; display:flex; flex-direction:column; align-items:center; }
  .video-frame { width:100%; height:50vh; border:none; }
  #downloadBtn { margin-top:20px; padding:12px 24px; font-size:18px; border:none; border-radius:36px; cursor:pointer; background:linear-gradient(135deg,#ff7e5f,#feb47b); color:#fff; }
  .lesson-selector { display:flex; flex-wrap:wrap; gap:12px; margin-bottom:12px; }
  .lesson-btn { padding:8px 16px; border:none; border-radius:20px; cursor:pointer; background:#0072ff; color:#fff; }
  @media(max-width:480px){ .video-frame{height:40vh;} #downloadBtn{width:80%;} }
</style>
</head>
<body>

<header>
  <div id="userNameArea"></div>
  <button id="signOutBtn" style="display:none;">Sign Out</button>
</header>

<div class="container">
  <div class="lesson-selector" id="lessonSelector"></div>
  <iframe id="videoFrame" class="video-frame" src="" allowfullscreen></iframe>
  <button id="downloadBtn">Download PDF</button>
</div>

<script>
// Courses and lessons
const courses = {
  c: {
    name: 'C Language',
    lessons: [
      { title: 'Lesson 1', video: 'https://www.youtube.com/embed/EjavYOFoJJ0' },
      { title: 'Lesson 2', video: 'https://www.youtube.com/embed/E6jtj-7xJoA' }
    ],
    pdf: 'pdfs/c-course.pdf'
  },
  cpp: {
    name: 'C++ Language',
    lessons: [
      { title: 'Lesson 1', video: 'https://www.youtube.com/embed/Cyha_W_gPdg'  },
      { title: 'Lesson 2', video: 'https://www.youtube.com/embed/7EW297QuJl0' }
    ],
    pdf: 'pdfs/cpp-course.pdf'
  },
  java: {
    name: 'Java',
    lessons: [
      { title: 'Lesson 1', video: 'https://www.youtube.com/embed/RJ733wzbNoA' },
      { title: 'Lesson 2', video: 'https://www.youtube.com/embed/Byf6xOYdNcw' }
    ],
    pdf: 'pdfs/java-course.pdf'
  },
  python: {
    name: 'Python',
    lessons: [
        { title: 'Lesson 1', video: 'https://www.youtube.com/embed/8c74mXV2lJ0' },
      { title: 'Lesson 2', video: 'https://www.youtube.com/embed/jr1FF9-VAJs' } ],
    pdf: 'pdfs/python-course.pdf'
  },
  tally: {
    name: 'Tally',
    lessons: [
      { title: 'Lesson 1', video: 'https://www.youtube.com/embed/VIDEO_TALLY_1' }
    ],
    pdf: 'pdfs/tally-course.pdf'
  },
  bcs: {
    name: 'BCS',
    lessons: [
      { title: 'Lesson 1', video: 'https://www.youtube.com/embed/VIDEO_BCS_1' }
    ],
    pdf: 'pdfs/bcs-course.pdf'
  },
  pgdca: {
    name: 'PGDCA',
    lessons: [
      { title: 'Lesson 1', video: 'https://www.youtube.com/embed/VIDEO_PGDCA_1' }
    ],
    pdf: 'pdfs/pgdca-course.pdf'
  }
};

// Get course from URL
const urlParams = new URLSearchParams(window.location.search);
const currentCourse = urlParams.get('course') || 'c';
const courseData = courses[currentCourse];

// Elements
const videoFrame = document.getElementById('videoFrame');
const lessonSelector = document.getElementById('lessonSelector');
const downloadBtn = document.getElementById('downloadBtn');

// Populate lessons
courseData.lessons.forEach((lesson, index) => {
  const btn = document.createElement('button');
  btn.className = 'lesson-btn';
  btn.textContent = lesson.title;
  btn.addEventListener('click', () => {
    videoFrame.src = lesson.video;
  });
  lessonSelector.appendChild(btn);
});

// Set default first lesson
videoFrame.src = courseData.lessons[0].video;

// PDF download logic
downloadBtn.addEventListener('click', () => {
  const userPaid = JSON.parse(localStorage.getItem(`paid_${currentCourse}`));
  if(userPaid){
    window.open(courseData.pdf, '_blank');
  } else {
    alert('Please complete payment to unlock PDF.');
    // Integrate payment gateway here
  }
});

// User status & sign out
function getCurrentUser(){ const raw = localStorage.getItem('teacherHubUser'); return raw ? JSON.parse(raw) : null; }
function showUser(){ 
  const u = getCurrentUser();
  const userArea = document.getElementById('userNameArea');
  const signOutBtn = document.getElementById('signOutBtn');
  if(u){ userArea.textContent = `Welcome, ${u.name}`; signOutBtn.style.display='inline-block'; }
  else{ userArea.textContent=''; signOutBtn.style.display='none'; }
}
document.getElementById('signOutBtn').addEventListener('click', () => {
  localStorage.removeItem('teacherHubUser'); 
  showUser();
  alert('You have signed out');
});
document.addEventListener('DOMContentLoaded', showUser);
</script>

</body>
</html>
